!function(e){var r={};function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(o,n,function(r){return e[r]}.bind(null,n));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){let o=t(1);start_btn.addEventListener("click",function(){try{let e=o.rates,r=o.devices,t=o.maxPower,a=performance.now(),u=new n(e,r,t);a=performance.now()-a,console.log(u.makeExport()),console.log(`Время выполнения = ${a}ms`)}catch(e){console.log(e.message)}});class n{constructor(e,r,t){if(!e||!r||!t)throw new Error("Отсутсвуют входные данные. Проеверьте правильность написания json");this.createTimingLine(e),this.checkDevices(r)}makeExport(){let e={};return this.shedule.forEach((r,t)=>{e[t]=r.ids}),{shedule:e,consumedEnergy:this.consumedEnergy}}createTimingLine(e){this.shedule=Array(24),e.forEach(e=>{if(!e.from||!e.to||!e.value)throw new Error("Неверные входные данные для тарифов. Отсутсвтуют необходимые поля");let r=new a(e.from);for(;r.value!==e.to;)this.shedule[r.value]={value:e.value,ids:[]},r.inc();this.shedule.forEach(e=>{if(!e)throw new Error("Неверные входные данные для тарифов. Отсутсвтует значение диапазона")})})}checkDevices(e){this.consumedEnergy={value:0,devices:{}},e.forEach(e=>{if(!(e.id&&e.name&&e.power&&e.duration))throw new Error("Отсутсвуют входные данные. Отсуттстыуют необходимые данные устройства");let r,t;switch(e.mode||(e.mode="all"),e.power=e.power/1e3,e.mode){case"day":if(r=7,t=20,e.duration>14)throw new Error("Неверные входные данные. Время работы усройства не соответсвтует его периоду дня");break;case"night":if(r=21,t=6,e.duration>10)throw new Error("Неверные входные данные. Время работы усройства не соответсвтует его периоду дня");break;case"all":r=0,t=23,e.duration>24&&(e.duration=24)}let o=new a(r),n=new a(t-e.duration),u=new a(r),i=new a(0),l={start:0,value:1/0},s=0;do{if(u.value=o.value,i.setVal(o.value+e.duration),24===e.duration)for(let r=0;r<24;r++)s+=e.power*this.shedule[r].value;else for(;u.value!==i.value;)s+=e.power*this.shedule[u.value].value,u.inc();s<l.value&&(l.value=s,l.start=o.value),o.inc()}while(o.value!==n.value);if(o.setVal(l.start),n.setVal(l.start+e.duration),24===e.duration)for(let r=0;r<24;r++)this.shedule[r].ids.push(e.id);else for(;o.value!==n.value;)this.shedule[o.value].ids.push(e.id),o.inc();this.consumedEnergy.value+=l.value,this.consumedEnergy.devices[e.id]=l.value,e.cost=l.value})}}class a{constructor(e){this.setVal(e)}inc(){this.value+1===24?this.value=0:this.value++}setVal(e){this.value=e>23?e-24:e<0?24+e:e}}},function(e){e.exports={devices:[{id:"F972B82BA56A70CC579945773B6866FB",name:"Посудомоечная машина",power:950,duration:3,mode:"night"},{id:"C515D887EDBBE669B2FDAC62F571E9E9",name:"Духовка",power:2e3,duration:2,mode:"day"},{id:"02DDD23A85DADDD71198305330CC386D",name:"Холодильник",power:50,duration:24},{id:"1E6276CC231716FE8EE8BC908486D41E",name:"Термостат",power:50,duration:24},{id:"7D9DC84AD110500D284B33C82FE6E85E",name:"Кондиционер",power:850,duration:1}],rates:[{from:7,to:10,value:6.46},{from:10,to:17,value:5.38},{from:17,to:21,value:6.46},{from:21,to:23,value:5.38},{from:23,to:7,value:1.79}],maxPower:2100}}]);